# First, disable all hive based districts


district_hive = {
    base_buildtime = 480
    is_capped_by_modifier = no
    exempt_from_ai_planet_specialization = yes

    show_on_uncolonized = {
        from = {
            is_hive_empire = yes
            gestalt_paramind_buildings = no
        }
        OR = {
            uses_district_set = standard
            uses_district_set = hive_world
            uses_district_set = machine_world
            uses_district_set = shattered_ring_world
        }
    }

    potential = {
        exists = owner
        owner = { is_hive_empire = yes }
        owner = { gestalt_paramind_buildings = no }
        OR = {
            uses_district_set = standard
            uses_district_set = hive_world
            uses_district_set = machine_world
            uses_district_set = shattered_ring_world
        }
    }

    allow = {
        NOT = { has_modifier = resort_colony }
    }

    conversion_ratio = 1
    convert_to = {
        district_arcology_housing
        district_rw_hive
        district_nexus
        district_city
    }

    resources = {
        category = planet_districts_cities
        cost = {
            minerals = @city_cost
        }
        upkeep = {
            energy = 2
        }
    }

    planet_modifier = {
        planet_housing_add = 6
        job_maintenance_drone_add = 3
        planet_max_buildings_add = 1
    }

    triggered_planet_modifier = {
        potential = {
            is_planet_class = pc_hive
        }
        modifier = {
            planet_housing_add = 6
            job_maintenance_drone_add = 3
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_technology = tech_housing_1 }
        }
        modifier = {
            planet_housing_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_technology = tech_housing_2 }
        }
        modifier = {
            planet_housing_add = 1
            job_maintenance_drone_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_active_tradition = tr_prosperity_extended_hives }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
}


district_industrial = {
    base_buildtime = 480
    is_capped_by_modifier = no

    prerequisites = {
        tech_basic_industry
    }

    show_on_uncolonized = {
        exists = from
        uses_district_industrial = yes
    }

    potential = {
        exists = owner
        uses_district_industrial = yes
    }

    allow = {
        NOT = { has_modifier = resort_colony }
        NOT = { has_modifier = slave_colony }
    }

    conversion_ratio = 1
    convert_to = {
        district_arcology_arms_industry
        district_rw_industrial
    }

    resources = {
        category = planet_districts_industrial
        cost = {
            minerals = @city_cost
        }
        upkeep = {
            energy = 2
        }

        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    has_edict = industrial_maintenance
                }
            }
            energy = 2
        }
    }

    planet_modifier = {
        planet_housing_add = 2
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_crafter_empire = yes }
        }
        modifier = {
            planet_max_buildings_add = 0.34
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        modifier = {
            job_artisan_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_crafter_empire = yes }
        }
        modifier = {
            job_artificer_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_foundry_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_technician_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_hive_empire = yes
                gestalt_paramind_buildings = no
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_alloy_drone_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_fabricator_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = yes
                gestalt_paramind_buildings = no
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_drone_add = 2
        }
    }

    # Designation Job Changes
    triggered_planet_modifier = {
        potential = {
            has_designation = col_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        modifier = {
            job_artisan_add = -1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
            }
        }
        modifier = {
            job_artificer_add = -1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_foundry_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_technician_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        modifier = {
            job_artisan_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
            }
        }
        modifier = {
            job_artificer_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_foundry_add = -1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_technician_add = -1
        }
    }

    triggered_planet_modifier = {
        potential = {
            OR = {
                has_designation = col_factory
                has_designation = col_mac_factory
            }
            exists = owner
            owner = {
                is_machine_empire = yes
                country_uses_consumer_goods = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_artisan_drone_add = 1
            job_fabricator_add = -1
        }
    }

    triggered_planet_modifier = {
        potential = {
            OR = {
                has_designation = col_factory
                has_designation = col_mac_factory
            }
            exists = owner
            owner = {
                is_machine_empire = yes
                country_uses_consumer_goods = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_artisan_drone_add = 1
            job_catalytic_drone_add = -1
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        text = job_artisan_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
            }
        }
        text = job_artificer_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                country_uses_consumer_goods = yes
            }
        }
        text = job_artisan_drone_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        text = job_foundry_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        text = job_catalytic_technician_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                is_catalytic_empire = no
            }
        }
        text = job_fabricator_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_hive_empire = yes
                gestalt_paramind_buildings = no
                is_catalytic_empire = no
            }
        }
        text = job_alloy_drone_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = yes
                is_catalytic_empire = yes
            }
        }
        text = job_catalytic_drone_effect_desc
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_edict = industrial_maintenance
            }
        }
        modifier = {
            job_maintenance_drone_add = 1
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_edict = industrial_maintenance
            }
        }
        text = job_maintenance_drone_effect_desc
    }
}



district_arcology_arms_industry = {
    base_buildtime = 600
    is_capped_by_modifier = no

    show_on_uncolonized = {
        uses_district_set = city_world
    }

    potential = {
        uses_district_set = city_world
    }

    conversion_ratio = 1
    convert_to = {
        district_city
        district_nexus
        district_hive
    }

    resources = {
        category = planet_districts
        cost = {
            minerals = 1000
            volatile_motes = 50
        }
        upkeep = {
            energy = 5
            volatile_motes = 1
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    has_edict = industrial_maintenance
                }
            }
            energy = 2
        }
    }

    planet_modifier = {
        planet_housing_add = 10
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_fabricator_add = 6
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_hive_empire = yes
                gestalt_paramind_buildings = no
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_alloy_drone_add = 6
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = yes
                gestalt_paramind_buildings = no
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_drone_add = 6
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_foundry_add = 6
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_technician_add = 6
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        text = job_foundry_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        text = job_catalytic_technician_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_hive_empire = yes
                gestalt_paramind_buildings = no
                is_catalytic_empire = no
            }
        }
        text = job_alloy_drone_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                is_catalytic_empire = no
            }
        }
        text = job_fabricator_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = yes
                is_catalytic_empire = yes
            }
        }
        text = job_catalytic_drone_effect_desc
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_edict = industrial_maintenance
            }
        }
        modifier = {
            job_maintenance_drone_add = 1
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_edict = industrial_maintenance
            }
        }
        text = job_maintenance_drone_effect_desc
    }
}


district_generator = {
    base_buildtime = 240

    min_for_deposits_on_planet = 3
    max_for_deposits_on_planet = 15

    show_on_uncolonized = {
        uses_district_set = standard
    }

    potential = {
        uses_district_set = standard
    }

    allow = {
        NOT = { has_modifier = resort_colony }
    }

    conversion_ratio = 1
    convert_to = {
        district_generator_uncapped
    }

    resources = {
        category = planet_districts
        cost = {
            minerals = @base_cost
        }
        upkeep = {
            energy = 1
        }
    }

    planet_modifier = {
        planet_housing_add = 2
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_agrarian_idyll
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_hive_empire = yes }
            owner = { gestalt_paramind_buildings = no }
        }
        modifier = {
            job_technician_drone_add = 3
        }
    }
    # Paraminds get an extra technician
        triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                gestalt_paramind_buildings = yes
            }
        }
        modifier = {
            job_technician_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_machine_empire = yes }
        }
        modifier = {
            job_technician_drone_add = 2
            planet_housing_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_technician_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        modifier = {
            job_fe_acolyte_generator_add = 2
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_gestalt = yes }
        }
        text = job_technician_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        text = job_technician_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        text = job_fe_acolyte_generator_effect_desc
    }

    prerequisites = {
        tech_power_plant_1
    }
}

district_mining = {
    base_buildtime = 240

    min_for_deposits_on_planet = 1
    max_for_deposits_on_planet = 15

    show_on_uncolonized = {
        uses_district_set = standard
        NAND = {
            exists = from
            from = { is_subterranean_empire = yes }
        }
    }

    potential = {
        uses_district_set = standard
        NAND = {
            exists = owner
            owner = { is_subterranean_empire = yes }
        }
    }

    allow = {
        NOT = { has_modifier = resort_colony }
    }

    conversion_ratio = 1
    convert_to = {
        district_mining_uncapped
    }

    resources = {
        category = planet_districts
        cost = {
            minerals = @base_cost
        }
        upkeep = {
            energy = 1
        }
    }

    planet_modifier = {
        planet_housing_add = 2
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_agrarian_idyll
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_hive_empire = yes }
            owner = { gestalt_paramind_buildings = no }
        }
        modifier = {
            job_mining_drone_add = 3
        }
    }
    
    # Paramind get one extra slot for mining too
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                gestalt_paramind_buildings = yes
            }
        }
        modifier = {
            job_miner_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_machine_empire = yes }
        }
        modifier = {
            job_mining_drone_add = 2
            planet_housing_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_miner_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        modifier = {
            job_fe_acolyte_mine_add = 2
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_gestalt = yes }
        }
        text = job_mining_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        text = job_miner_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        text = job_fe_acolyte_mine_effect_desc
    }

    prerequisites = {
        tech_mechanized_mining
    }
}

district_farming = {
    base_buildtime = 240

    min_for_deposits_on_planet = 3
    max_for_deposits_on_planet = 15

    show_on_uncolonized = {
        uses_district_set = standard
    }

    potential = {
        uses_district_set = standard
        OR = {
            NOT = { exists = owner }
            NOT = { owner = { is_anglers_empire = yes } }
            AND = {
                owner = { is_anglers_empire = yes }
                NOT = { is_planet_class = pc_ocean }
            }
        }
        NOT = {
            AND = {
                exists = owner
                owner = {
                    is_ai = yes
                    country_uses_food = no
                }
            }
        }
    }

    allow = {
        NOT = { has_modifier = resort_colony }
    }

    conversion_ratio = 1
    convert_to = {
        district_farming_uncapped
    }

    resources = {
        category = planet_districts
        cost = {
            minerals = @base_cost
        }
        # Anglers Civic cost effect
        cost = {
            trigger = {
                AND = {
                    exists = owner
                    owner = { is_anglers_empire = yes }
                    planet = { has_climate = wet }
                }
            }
            minerals = -50
        }
        upkeep = {
            energy = 1
        }
    }

    planet_modifier = {
        planet_housing_add = 2
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_agrarian_idyll
            }
        }
        modifier = {
            planet_housing_add = 1
            planet_max_buildings_add = 0.25
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_housing_agrarian_idyll
                has_valid_civic = civic_agrarian_idyll
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_hive_empire = yes }
            owner = { gestalt_paramind_buildings = no }
        }
        modifier = {
            job_agri_drone_add = 3
        }
    }
    
    # paramind get one extra farmer
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                gestalt_paramind_buildings = yes
            }
        }
        modifier = {
            job_farmer_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_machine_empire = yes }
        }
        modifier = {
            job_agri_drone_add = 2
            planet_housing_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
                NAND = {
                    is_anglers_empire = yes
                    PREV = { planet = { is_wet = yes } }
                }
            }
        }
        modifier = {
            job_farmer_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        modifier = {
            job_fe_acolyte_farm_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_anglers_empire = yes }
            planet = { is_wet = yes }
        }
        modifier = {
            job_angler_add = 1
            job_pearl_diver_add = 1
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_gestalt = yes }
        }
        text = job_agri_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
                NAND = {
                    is_anglers_empire = yes
                    PREV = { planet = { is_wet = yes } }
                }
            }
        }
        text = job_farmer_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        text = job_fe_acolyte_farm_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_anglers_empire = yes }
            planet = { is_wet = yes }
        }
        text = job_aqu_angler_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_anglers_empire = yes }
            planet = { is_wet = yes }
        }
        text = job_pearl_diver_effect_desc
    }

    prerequisites = {
        tech_industrial_farming
    }

    destroy_trigger = {
        exists = owner
        AND = {
            owner = { is_ai = yes }
            owner = { country_uses_food = no }
        }
    }
}



# FALLEN EMPIRE RURALS

district_generator_uncapped = {
    base_buildtime = 240
    icon = district_generator
    is_capped_by_modifier = no

    show_on_uncolonized = {
        OR = {
            uses_district_set = hive_world
            uses_district_set = machine_world
            AND = {
                exists = from
                from = {
                    OR = {
                        is_gestalt = yes
                        is_fallen_empire = yes
                    }
                }
                uses_district_set = shattered_ring_world
            }
        }
    }

    potential = {
        OR = {
            uses_district_set = hive_world
            uses_district_set = machine_world
            AND = {
                exists = owner
                owner = {
                    OR = {
                        is_gestalt = yes
                        is_fallen_empire = yes
                    }
                }
                uses_district_set = shattered_ring_world
            }
        }
    }

    allow = {
        NOT = { has_modifier = resort_colony }
    }

    conversion_ratio = 1
    convert_to = {
        district_generator
        district_rw_generator
        district_srw_commercial
    }

    resources = {
        category = planet_districts
        cost = {
            minerals = @base_cost
        }
        upkeep = {
            energy = 1
        }
    }

    planet_modifier = {
        planet_housing_add = 2
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_agrarian_idyll
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_hive_empire = yes }
            owner = { gestalt_paramind_buildings = no }
        }
        modifier = {
            job_technician_drone_add = 3
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_machine_empire = yes }
        }
        modifier = {
            job_technician_drone_add = 2
            planet_housing_add = 1
        }
    }
    
    # paraminds get one extra for rurals
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                gestalt_paramind_buildings = yes
            }
        }
        modifier = {
            job_technician_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_technician_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        modifier = {
            job_fe_acolyte_generator_add = 2
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_gestalt = yes }
        }
        text = job_technician_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        text = job_technician_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        text = job_fe_acolyte_generator_effect_desc
    }
}

district_mining_uncapped = {
    base_buildtime = 240
    icon = district_mining
    is_capped_by_modifier = no

    desc = {
        trigger = {
            NOT = { uses_district_set = shattered_ring_world }
        }
        text = district_mining_uncapped_desc
    }

    desc = {
        trigger = { 
            uses_district_set = shattered_ring_world
            NOT = { owner = { is_subterranean_empire = yes } }
        }
        text = district_srw_mining_desc
    }

    show_on_uncolonized = {
        OR = {
            uses_district_set = hive_world
            uses_district_set = machine_world
            uses_district_set = shattered_ring_world
            AND = {
                exists = from
                from = { is_subterranean_empire = yes }
                uses_district_set = standard
            }
        }
    }

    potential = {
        
        OR = {
            uses_district_set = hive_world
            uses_district_set = machine_world
            uses_district_set = shattered_ring_world
            AND = {
                exists = owner
                owner = { is_subterranean_empire = yes }
                uses_district_set = standard
            }
        }
    }

    allow = {
        NOT = { has_modifier = resort_colony }
    }

    conversion_ratio = 1
    convert_to = {
        district_mining
    }

    resources = {
        category = planet_districts
        cost = {
            minerals = @base_cost
        }
        upkeep = {
            energy = 1
        }
    }

    planet_modifier = {
        planet_housing_add = 2
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_agrarian_idyll
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            NOT = { uses_district_set = shattered_ring_world }
            exists = owner
            owner = { is_hive_empire = yes }
            owner = { gestalt_paramind_buildings = no }
        }
        modifier = {
            job_mining_drone_add = 3
        }
    }

    triggered_planet_modifier = {
        potential = {
            NOT = { uses_district_set = shattered_ring_world }
            exists = owner
            owner = { is_machine_empire = yes }
        }
        modifier = {
            job_mining_drone_add = 2
            planet_housing_add = 1
        }
    }
    
    # one extra miner for paraminds
    triggered_planet_modifier = {
        potential = {
            NOT = { uses_district_set = shattered_ring_world }
            exists = owner
            owner = {
                gestalt_paramind_buildings = yes
            }
        }
        modifier = {
            job_miner_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            NOT = { uses_district_set = shattered_ring_world }
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_miner_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            NOT = { uses_district_set = shattered_ring_world }
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        modifier = {
            job_fe_acolyte_mine_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_origin = origin_subterranean }
        }
        modifier = {
            planet_housing_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            uses_district_set = shattered_ring_world
            exists = owner
            owner = { is_hive_empire = yes }
        }
        modifier = {
            job_scrap_miner_drone_add = 3
        }
    }

    triggered_planet_modifier = {
        potential = {
            uses_district_set = shattered_ring_world
            exists = owner
            owner = { is_machine_empire = yes }
        }
        modifier = {
            job_scrap_miner_drone_add = 2
            planet_housing_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            uses_district_set = shattered_ring_world
            exists = owner
            owner = {
                is_gestalt = no
            }
        }
        modifier = {
            job_scrap_miner_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_origin = origin_subterranean }
        }
        modifier = {
            planet_housing_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_origin = origin_subterranean }
        }
        modifier = {
            planet_max_buildings_add = 0.34
        }
    }

    triggered_desc = {
        trigger = {
            NOT = { uses_district_set = shattered_ring_world }
            exists = owner
            owner = { is_gestalt = yes }
        }
        text = job_mining_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            NOT = { uses_district_set = shattered_ring_world }
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        text = job_miner_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_gestalt = yes }
            NOT = { owner = { has_origin = origin_subterranean } }
        }
        text = job_scrap_miner_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_regular_empire = yes }
            NOT = { owner = { has_origin = origin_subterranean } }
        }
        text = job_scrap_miner_effect_desc
    }

    triggered_desc = {
        trigger = {
            NOT = { uses_district_set = shattered_ring_world }
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        text = job_fe_acolyte_mine_effect_desc
    }

    prerequisites = {
    }
}

district_farming_uncapped = {
    base_buildtime = 240
    icon = district_farming
    is_capped_by_modifier = no

    show_on_uncolonized = {
        OR = {
            uses_district_set = hive_world
            uses_district_set = shattered_ring_world
        }
    }

    potential = {
        OR = {
            uses_district_set = hive_world
            uses_district_set = shattered_ring_world
            AND = {
                exists = owner
                owner = { is_anglers_empire = yes }
                planet = { is_planet_class = pc_ocean }
            }
        }
        NOT = {
            AND = {
                owner = { is_ai = yes }
                owner = { country_uses_food = no }
            }
        }
    }

    allow = {
        NOT = { has_modifier = resort_colony }
    }

    conversion_ratio = 1
    convert_to = {
        district_farming
        district_rw_farming
    }

    resources = {
        category = planet_districts
        cost = {
            minerals = @base_cost
        }
        # Anglers Civic cost effect
        cost = {
            trigger = {
                AND = {
                    exists = owner
                    owner = { is_anglers_empire = yes }
                    planet = { is_planet_class = pc_ocean }
                }
            }
            minerals = -50
        }
        upkeep = {
            energy = 1
        }
    }

    planet_modifier = {
        planet_housing_add = 2
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_agrarian_idyll
            }
        }
        modifier = {
            planet_housing_add = 1
            planet_max_buildings_add = 0.25
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_housing_agrarian_idyll
                has_valid_civic = civic_agrarian_idyll
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_hive_empire = yes }
            owner = { gestalt_paramind_buildings = no }
        }
        modifier = {
            job_agri_drone_add = 3
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_machine_empire = yes }
        }
        modifier = {
            job_agri_drone_add = 2
            planet_housing_add = 1
        }
    }
    
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                gestalt_paramind_buildings = yes
            }
        }
        modifier = {
            job_farmer_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
                NAND = {
                    is_anglers_empire = yes
                    PREV = { planet = { is_wet = yes } }
                }
            }
        }
        modifier = {
            job_farmer_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        modifier = {
            job_fe_acolyte_farm_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_anglers_empire = yes }
            planet = { is_wet = yes }
        }
        modifier = {
            job_angler_add = 1
            job_pearl_diver_add = 1
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_gestalt = yes }
        }
        text = job_agri_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
                NAND = {
                    is_anglers_empire = yes
                    PREV = { planet = { is_wet = yes } }
                }
            }
        }
        text = job_farmer_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        text = job_fe_acolyte_farm_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_anglers_empire = yes  }
            planet = { is_wet = yes }
        }
        text = job_aqu_angler_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_anglers_empire = yes  }
            planet = { is_wet = yes }
        }
        text = job_pearl_diver_effect_desc
    }

    destroy_trigger = {
        exists = owner
        AND = {
            owner = { is_ai = yes }
            owner = { country_uses_food = no }
        }
    }
}


# Now the orbital habitats 03_habitat_districts


district_hab_energy = {
    base_buildtime = 240
    is_capped_by_modifier = no

    show_on_uncolonized = {
        uses_district_set = habitat
        OR = {
            has_planet_flag = energy_habitat
            AND = {
                exists = from
                from = { is_gestalt = yes }
            }
        }
    }

    potential = {
        uses_district_set = habitat
        OR = {
            has_planet_flag = energy_habitat
            AND = {
                exists = owner
                owner = { is_gestalt = yes }
            }
        }
    }

    conversion_ratio = 0.5
    convert_to = {
        district_hab_commercial
    }

    planet_modifier = {
        planet_housing_add = 3
    }

    resources = {
        category = planet_districts_hab_energy
        cost = {
            minerals = @hab_cost
        }
        upkeep = {
            energy = @hab_maintenance
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_technician_add = 3
        }
    }
    
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                gestalt_paramind_buildings = yes
            }
        }
        modifier = {
            job_technician_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        modifier = {
            job_fe_acolyte_generator_add = 3
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_machine_empire = yes }
        }
        job_technician_drone_add = 3
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_hive_empire = yes }
            owner = { gestalt_uses_drones = yes }
        }
        job_technician_drone_add = 4
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_gestalt = yes }
        }
        text = job_technician_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        text = job_technician_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        text = job_fe_acolyte_generator_effect_desc
    }
}

district_hab_industrial = {
    base_buildtime = 240
    is_capped_by_modifier = no

    show_on_uncolonized = {
        uses_district_set = habitat
    }

    potential = {
        uses_district_set = habitat
    }

    resources = {
        category = planet_districts_hab_industrial
        cost = {
            minerals = @hab_cost
        }
        upkeep = {
            energy = @hab_maintenance
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    has_edict = industrial_maintenance
                }
            }
            energy = 2
        }
    }

    planet_modifier = {
        planet_housing_add = 3
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_artisan_add = 1
            job_foundry_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_artificer_add = 1
            job_foundry_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_artisan_add = 1
            job_catalytic_technician_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_artificer_add = 1
            job_catalytic_technician_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_hive_empire = yes
                gestalt_uses_drones = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_alloy_drone_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_fabricator_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = yes
                gestalt_uses_drones = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_drone_add = 2
        }
    }
    
    # Designation Job Changes
    triggered_planet_modifier = {
        potential = {
            has_designation = col_habitat_foundry
            exists = owner
            owner = {
                gestalt_paramind_buildings = yes
            }
        }
        # one extra foundry job for paraminds
        modifier = {
            job_foundry_add = 1
        }
    }

    # Designation Job Changes
    triggered_planet_modifier = {
        potential = {
            has_designation = col_habitat_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_artisan_add = -1
            job_foundry_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_habitat_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_artificer_add = -1
            job_foundry_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_habitat_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_artisan_add = 1
            job_foundry_add = -1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_habitat_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_artificer_add = 1
            job_foundry_add = -1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_habitat_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_artisan_add = -1
            job_catalytic_technician_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_habitat_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_artificer_add = -1
            job_catalytic_technician_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_habitat_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_artisan_add = 1
            job_catalytic_technician_add = -1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_habitat_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_artificer_add = 1
            job_catalytic_technician_add = -1
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_habitat_factory
            exists = owner
            owner = {
                is_machine_empire = yes
                country_uses_consumer_goods = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_artisan_drone_add = 2
            job_fabricator_add = -2
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_habitat_factory
            exists = owner
            owner = {
                is_machine_empire = yes
                country_uses_consumer_goods = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_artisan_drone_add = 2
            job_catalytic_drone_add = -2
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_valid_civic = civic_machine_servitor
            }
        }
        text = job_artisan_drone_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_crafter_empire = yes
            }
        }
        text = job_artificer_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        text = job_foundry_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        text = job_catalytic_technician_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                is_catalytic_empire = no
            }
        }
        text = job_fabricator_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_hive_empire = yes
                is_catalytic_empire = no
            }
        }
        text = job_alloy_drone_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = yes
                is_catalytic_empire = yes
            }
        }
        text = job_catalytic_drone_effect_desc
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_edict = industrial_maintenance
            }
        }
        modifier = {
            job_maintenance_drone_add = 1
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_edict = industrial_maintenance
            }
        }
        text = job_maintenance_drone_effect_desc
    }
}


district_hab_science = {
    base_buildtime = 240
    is_capped_by_modifier = no

    show_on_uncolonized = {
        uses_district_set = habitat
        has_planet_flag = research_habitat
    }

    potential = {
        uses_district_set = habitat
        has_planet_flag = research_habitat
    }

    resources = {
        category = planet_districts_hab_research
        cost = {
            minerals = @hab_cost
        }
        upkeep = {
            energy = @hab_maintenance
        }
    }

    planet_modifier = {
        planet_housing_add = 3
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_regular_empire = yes }
        }
        modifier = {
            job_researcher_add = 3
        }
    }
    
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { gestalt_paramind_buildings = yes }
        }
        modifier = {
            job_researcher_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_hive_empire = yes }
            owner = { gestalt_uses_drones = yes }
        }
        modifier = {
            job_brain_drone_add = 3
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_machine_empire = yes }
        }
        modifier = {
            job_calculator_add = 3
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_regular_empire = yes }
        }
        text = job_researcher_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_hive_empire = yes }
            owner = { gestalt_uses_drones = yes }
        }
        text = job_brain_drone_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_machine_empire = yes }
        }
        text = job_calculator_effect_desc
    }
}

district_hab_commercial = {
    base_buildtime = 240
    is_capped_by_modifier = no

    show_on_uncolonized = {
        uses_district_set = habitat

        exists = from
        from = { is_gestalt = no }
    }

    potential = {
        uses_district_set = habitat

        exists = owner
        owner = { is_gestalt = no }
    }

    conversion_ratio = 0.5
    convert_to = {
        district_hab_energy
    }

    resources = {
        category = planet_districts_hab_trade
        cost = {
            minerals = @hab_cost
        }
        upkeep = {
            energy = @hab_maintenance
        }
    }

    planet_modifier = {
        planet_housing_add = 3
    }
    
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { gestalt_paramind_buildings = yes }
        }
        modifier = {
            job_clerk_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_active_tradition = tr_prosperity_interstellar_franchising }
        }
        modifier = {
            job_clerk_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = no }
        }
        modifier = {
            job_clerk_add = 3
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        modifier = {
            job_manager_add = 3
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_active_tradition = tr_mercantile_commercial_enterprise
            }
        }
        modifier = {
            job_merchant_add = 1
        }
    }

    triggered_desc = {
        text = job_clerk_effect_desc
    }
    triggered_desc = {
        text = job_merchant_effect_desc
        trigger = {
            exists = owner
            owner = {
                has_active_tradition = tr_mercantile_commercial_enterprise
            }
        }
    }
}

district_hab_mining = {
    base_buildtime = 240
    is_capped_by_modifier = no

    show_on_uncolonized = {
        uses_district_set = habitat
        has_planet_flag = mining_habitat
    }

    potential = {
        uses_district_set = habitat
        has_planet_flag = mining_habitat
    }

    planet_modifier = {
        planet_housing_add = 3
    }

    resources = {
        category = planet_districts_hab_mining
        cost = {
            minerals = @hab_cost
        }
        upkeep = {
            energy = @hab_maintenance
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_hive_empire = yes }
            owner = { gestalt_uses_drones = yes }
        }
        modifier = {
            job_mining_drone_add = 4
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_machine_empire = yes }
        }
        modifier = {
            job_mining_drone_add = 3
        }
    }
    
        triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                gestalt_paramind_buildings = yes
            }
        }
        modifier = {
            job_miner_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_miner_add = 3
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        modifier = {
            job_fe_acolyte_mine_add = 3
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_gestalt = yes }
        }
        text = job_mining_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        text = job_miner_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        text = job_fe_acolyte_mine_effect_desc
    }
}


district_hab_cultural = {
    base_buildtime = 240
    is_capped_by_modifier = no
    exempt_from_ai_planet_specialization = yes

    show_on_uncolonized = {
        uses_district_set = habitat

        exists = from
        from = {
            OR = {
                is_gestalt = no
                has_valid_civic = civic_machine_servitor
            }
        }
    }

    potential = {
        uses_district_set = habitat

        exists = owner
        owner = {
            OR = {
                is_gestalt = no
                has_valid_civic = civic_machine_servitor
            }
        }
    }

    conversion_ratio = 0.5
    convert_to = {
        district_hab_energy
    }

    resources = {
        category = planet_districts_hab_leisure
        cost = {
            minerals = @hab_cost
        }
        upkeep = {
            energy = @hab_maintenance
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                NOT = {
                    is_machine_empire = yes
                    has_valid_civic = civic_machine_servitor
                }
            }
        }
        modifier = {
            planet_housing_add = 3
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                NOT = { has_valid_civic = civic_warrior_culture }
            }
        }
        modifier = {
            job_entertainer_add = 3
        }
    }
    
        triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                gestalt_paramind_buildings = yes
            }
        }
        modifier = {
            job_entertainer_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                has_valid_civic = civic_warrior_culture
            }
        }
        modifier = {
            job_duelist_add = 3
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_valid_civic = civic_machine_servitor
            }
        }
        modifier = {
            job_bio_trophy_add = 5
            job_maintenance_drone_add = 1
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                has_valid_civic = civic_warrior_culture
            }
        }
        text = job_duelist_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                NOT = { has_valid_civic = civic_warrior_culture }
            }
        }
        text = job_entertainer_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_valid_civic = civic_machine_servitor
            }
        }
        text = job_bio_trophy_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_valid_civic = civic_machine_servitor
            }
        }
        text = job_maintenance_drone_effect_desc
    }
}



district_rw_hive = {
    base_buildtime = @rw_district_buildtime
    is_capped_by_modifier = no
    exempt_from_ai_planet_specialization = yes

    show_on_uncolonized = {
        exists = from
        from = { is_hive_empire = yes }
        uses_district_set = ring_world
    }

    potential = {
        exists = owner
        owner = { is_hive_empire = yes }
        owner = { gestalt_paramind_buildings = no }
        uses_district_set = ring_world
    }

    conversion_ratio = 0.5
    convert_to = {
        district_rw_nexus
        district_rw_city
    }

    resources = {
        category = planet_districts
        cost = {
            minerals = @rw_cost
        }
        upkeep = {
            energy = @rw_maintenance
        }
    }

    planet_modifier = {
        planet_housing_add = 30
        job_maintenance_drone_add = 15
        job_synapse_drone_add = 2
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_technology = tech_housing_1 }
        }
        modifier = {
            planet_housing_add = 5
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_technology = tech_housing_2 }
        }
        modifier = {
            planet_housing_add = 5
            job_maintenance_drone_add = 5
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_active_tradition = tr_prosperity_extended_hives }
        }
        modifier = {
            planet_housing_add = 5
        }
    }

    triggered_desc = {
        trigger = {
            planet = {
                has_deposit = d_arcane_generator
                NOT = { has_district = district_rw_hive }
            }
        }
        text = arcane_generator_upkeep_desc
    }
}


district_rw_generator = {
    base_buildtime = @rw_district_buildtime
    is_capped_by_modifier = no

    show_on_uncolonized = {
        uses_district_set = ring_world
        exists = from
        from = {
            OR = {
                is_gestalt = yes
                is_fallen_empire = yes
            }
        }
    }

    potential = {
        exists = owner
        owner = { is_gestalt = yes }
        uses_district_set = ring_world
    }

    convert_to = {
        district_rw_commercial
    }

    resources = {
        category = planet_districts
        cost = {
            minerals = @rw_cost
            rare_crystals = @rw_cost_sr
        }
        upkeep = {
            energy = @rw_maintenance
            rare_crystals = @rw_maintenance_sr
        }
    }

    triggered_planet_modifier = {
        planet_housing_add = 10
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_machine_empire = yes }
        }
        job_technician_drone_add = 10
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { gestalt_uses_drones = yes }
        }
        planet_housing_add = 5
        job_technician_drone_add = 15
    }
    
    # paramind bonus techs
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                gestalt_paramind_buildings = yes
            }
        }
        modifier = {
            job_technician_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_technician_add = 10
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        modifier = {
            job_fe_acolyte_generator_add = 10
        }
    }

    triggered_desc = {
        trigger = {
            planet = {
                has_deposit = d_arcane_generator
                NOT = { has_district = district_rw_generator }
            }
        }
        text = arcane_generator_upkeep_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_gestalt = yes }
        }
        text = job_technician_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        text = job_technician_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        text = job_fe_acolyte_generator_effect_desc
    }
}

district_rw_commercial = {
    base_buildtime = @rw_district_buildtime
    is_capped_by_modifier = no

    show_on_uncolonized = {
        uses_district_set = ring_world
        exists = from
        from = {
            is_gestalt = no
            is_fallen_empire = no
        }
    }

    potential = {
        exists = owner
        owner = {
            is_gestalt = no
            is_fallen_empire = no
        }
        uses_district_set = ring_world
    }

    convert_to = {
        district_rw_generator
    }

    resources = {
        category = planet_districts
        cost = {
            minerals = @rw_cost
            rare_crystals = @rw_cost_sr
        }
        upkeep = {
            energy = @rw_maintenance
            rare_crystals = @rw_maintenance_sr
        }
    }
    
    # paramind bonus
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                gestalt_paramind_buildings = yes
            }
        }
        modifier = {
            job_merchant_add = 1
            job_clerk_add = 1
        }
    }

    triggered_planet_modifier = {
        planet_housing_add = 10
        job_merchant_add = 2
        job_clerk_add = 6
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_active_tradition = tr_mercantile_commercial_enterprise
            }
        }
        modifier = {
            job_merchant_add = 2
        }
    }

    triggered_desc = {
        trigger = {
            planet = {
                has_deposit = d_arcane_generator
                NOT = { has_district = district_rw_commercial }
            }
        }
        text = arcane_generator_upkeep_desc
    }

    triggered_desc = {
        text = job_merchant_effect_desc
    }

    triggered_desc = {
        text = job_clerk_effect_desc
    }
}

district_rw_science = {
    base_buildtime = @rw_district_buildtime
    is_capped_by_modifier = no

    show_on_uncolonized = { uses_district_set = ring_world }

    potential = { uses_district_set = ring_world }

    resources = {
        category = planet_districts
        cost = {
            minerals = @rw_cost
            exotic_gases = @rw_cost_sr
        }
        upkeep = {
            energy = @rw_maintenance
            exotic_gases = @rw_maintenance_sr
        }
    }

    triggered_planet_modifier = {
        planet_housing_add = 10
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_regular_empire = yes }
        }
        modifier = {
            job_researcher_add = 10
        }
    }
    
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { gestalt_paramind_buildings = yes }
        }
        modifier = {
            job_researcher_add = 2
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { gestalt_uses_drones = yes }
        }
        modifier = {
            job_brain_drone_add = 10
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_machine_empire = yes }
        }
        modifier = {
            job_calculator_add = 10
        }
    }

    triggered_desc = {
        trigger = {
            planet = {
                has_deposit = d_arcane_generator
                NOT = { has_district = district_rw_science }
            }
        }
        text = arcane_generator_upkeep_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_regular_empire = yes }
        }
        text = job_researcher_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_hive_empire = yes }
        }
        text = job_brain_drone_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_machine_empire = yes }
        }
        text = job_calculator_effect_desc
    }
}

district_rw_farming = {
    base_buildtime = @rw_district_buildtime
    is_capped_by_modifier = no

    show_on_uncolonized = { uses_district_set = ring_world }

    potential = { 
        uses_district_set = ring_world
        NOT = {
            AND = {
                owner = { is_ai = yes }
                owner = { country_uses_food = no }
            }
        }
    }

    resources = {
        category = planet_districts
        cost = {
            minerals = @rw_cost
            volatile_motes = @rw_cost_sr
        }
        upkeep = {
            energy = @rw_maintenance
            volatile_motes = @rw_maintenance_sr
        }
    }

    # triggered for tooltip formatting purposes
    triggered_planet_modifier = {
        modifier = {
            planet_housing_add = 10
        }
    }
    
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { gestalt_paramind_buildings = yes }
        }
        modifier = {
            job_agri_drone_add = 3
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { gestalt_uses_drones = yes }
        }
        modifier = {
            planet_housing_add = 5
            job_agri_drone_add = 15
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_machine_empire = yes }
        }
        modifier = {
            job_agri_drone_add = 10
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_farmer_add = 10
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        modifier = {
            job_fe_acolyte_farm_add = 10
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_agrarian_idyll
            }
        }
        modifier = {
            planet_housing_add = 5
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_housing_agrarian_idyll
                has_valid_civic = civic_agrarian_idyll
            }
        }
        modifier = {
            planet_housing_add = 5
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_gestalt = yes }
        }
        text = job_agri_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        text = job_farmer_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_fallen_empire_spiritualist = yes }
        }
        text = job_fe_acolyte_farm_effect_desc
    }
}

district_rw_industrial = {
    base_buildtime = @rw_district_buildtime
    is_capped_by_modifier = no

    show_on_uncolonized = { uses_district_set = ring_world }

    potential = {
        uses_district_set = ring_world
    }

    resources = {
        category = planet_districts
        cost = {
            minerals = @rw_cost
            volatile_motes = @rw_cost_sr
        }
        upkeep = {
            energy = @rw_maintenance
            volatile_motes = @rw_maintenance_sr
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    has_edict = industrial_maintenance
                }
            }
            energy = 4
        }
    }

    triggered_planet_modifier = {
        planet_housing_add = 10
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        modifier = {
            job_artisan_add = 5
        }
    }
    
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                gestalt_paramind_buildings = yes
            }
        }
        modifier = {
            job_artisan_add = 1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
            }
        }
        modifier = {
            job_artificer_add = 5
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_foundry_add = 5
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_technician_add = 5
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                gestalt_uses_drones = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_alloy_drone_add = 10
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_fabricator_add = 10
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = yes
                gestalt_uses_drones = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_drone_add = 10
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_valid_civic = civic_machine_servitor
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_artisan_drone_add = 1
            job_fabricator_add = -1
        }
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_artisan_drone_add = 1
            job_catalytic_drone_add = -1
        }
    }



# Designation Job Changes
    triggered_planet_modifier = {
        potential = {
            has_designation = col_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        modifier = {
            job_artisan_add = -5
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
            }
        }
        modifier = {
            job_artificer_add = -5
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_foundry_add = 5
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_technician_add = 5
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        modifier = {
            job_artisan_add = 5
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
            }
        }
        modifier = {
            job_artificer_add = 5
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_foundry_add = -5
        }
    }

    triggered_planet_modifier = {
        potential = {
            has_designation = col_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_technician_add = -5
        }
    }

    triggered_planet_modifier = {
        potential = {
            OR = {
                has_designation = col_factory
                has_designation = col_mac_factory
            }
            exists = owner
            owner = {
                is_machine_empire = yes
                country_uses_consumer_goods = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_artisan_drone_add = 5
            job_fabricator_add = -5
        }
    }

    triggered_planet_modifier = {
        potential = {
            OR = {
                has_designation = col_factory
                has_designation = col_mac_factory
            }
            exists = owner
            owner = {
                is_machine_empire = yes
                country_uses_consumer_goods = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_artisan_drone_add = 5
            job_catalytic_drone_add = -5
        }
    }



    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        text = job_artisan_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                has_civic = civic_crafters
            }
        }
        text = job_artificer_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_valid_civic = civic_machine_servitor
            }
        }
        text = job_artisan_drone_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        text = job_foundry_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        text = job_catalytic_technician_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                is_catalytic_empire = no
            }
        }
        text = job_fabricator_effect_desc
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_hive_empire = yes
                is_catalytic_empire = no
            }
        }
        text = job_alloy_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = yes
                is_catalytic_empire = yes
            }
        }
        text = job_catalytic_drone_effect_desc
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_edict = industrial_maintenance
            }
        }
        modifier = {
            job_maintenance_drone_add = 2
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_edict = industrial_maintenance
            }
        }
        text = job_maintenance_drone_effect_desc
    }
}
